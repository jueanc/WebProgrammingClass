<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>玻璃感計數器</title>
  <style>
    /* --- 背景：柔和漸層＋微微顆粒 --- */
    :root {
      --bg1: #1e3c72;
      --bg2: #2a5298;
      --card: rgba(255,255,255,0.1);
      --text: #ffffff;
      --accent: #a0e9ff;
    }
    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", sans-serif;
      position: relative;
      overflow: hidden;
    }
    /* 顆粒感 */
    body::before {
      content: "";
      position: absolute; inset: -50%;
      background: radial-gradient(#ffffff20 1px, transparent 1px);
      background-size: 12px 12px;
      filter: blur(0.3px);
      pointer-events: none;
    }

    /* --- 卡片 --- */
    .card {
      width: min(90vw, 380px);
      padding: 24px;
      border-radius: 16px;
      background: var(--card);
      backdrop-filter: blur(10px) saturate(140%);
      -webkit-backdrop-filter: blur(10px) saturate(140%);
      box-shadow: 0 10px 30px #00000040, inset 0 0 0 1px #ffffff30;
      text-align: center;
      position: relative;
      transition: transform .2s ease;
    }
    .card:hover { transform: translateY(-2px); }
    .title {
      font-size: 20px;
      letter-spacing: .5px;
      opacity: .9;
      margin: 0 0 12px;
    }
    .count {
      font-size: clamp(40px, 10vw, 64px);
      font-weight: 800;
      margin: 4px 0 16px;
      line-height: 1;
      text-shadow: 0 6px 20px #00000060;
    }
    /* --- 按鈕群 --- */
    .row {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }
    button {
      all: unset;
      cursor: pointer;
      padding: 10px 16px;
      border-radius: 10px;
      background: #ffffff20;
      box-shadow: inset 0 0 0 1px #ffffff33, 0 4px 12px #00000030;
      transition: transform .08s ease, box-shadow .2s ease, background .2s;
      user-select: none;
      font-weight: 700;
    }
    button:hover { background: #ffffff30; }
    button:active { transform: translateY(1px) scale(0.98); }
    .accent { background: linear-gradient(135deg, #7bdff2, #b2f7ef); color: #073b4c; }
    .ghost  { background: #00000020; }
    /* 小提示文字 */
    .hint {
      margin-top: 12px;
      font-size: 12px;
      opacity: .8;
    }
    /* 右上角主題切換 */
    .theme {
      position: absolute; right: 10px; top: 10px;
      font-size: 12px;
      padding: 6px 10px;
      background: #00000030;
      border-radius: 999px;
    }

    /* --- 亮色主題（按右上角切換）--- */
    .light {
      --bg1: #f8ffae;
      --bg2: #43c6ac;
      --card: rgba(255,255,255,0.55);
      --text: #143642;
      --accent: #07689f;
    }
    .light button { box-shadow: inset 0 0 0 1px #0000001a, 0 4px 10px #0000001f; }
    .light .accent { color: white; background: linear-gradient(135deg, #00b4d8, #48cae4); }
  </style>
</head>
<body>
  <div class="card" id="card">
    <button class="theme" id="toggleTheme" aria-label="切換主題">🌓</button>
    <h1 class="title">玻璃感計數器</h1>
    <div class="count" id="count">0</div>
    <div class="row">
      <button class="accent" id="plus">+1</button>
      <button class="ghost"  id="minus">-1</button>
      <button id="reset">重設</button>
    </div>
    <p class="hint">提示：雙擊數字可以×2！長按 +1 可以連點加速。</p>
  </div>

  <script>
    // 取得元素
    const countEl = document.getElementById('count');
    const plusBtn = document.getElementById('plus');
    const minusBtn = document.getElementById('minus');
    const resetBtn = document.getElementById('reset');
    const toggleThemeBtn = document.getElementById('toggleTheme');

    // 狀態（存在 JS 變數，也順手存到 localStorage）
    let n = Number(localStorage.getItem('count') || 0);
    let isLight = localStorage.getItem('theme') === 'light';
    if (isLight) document.body.classList.add('light');
    render();

    // 基本事件
    plusBtn.addEventListener('click', () => update(1));
    minusBtn.addEventListener('click', () => update(-1));
    resetBtn.addEventListener('click', () => { n = 0; persist(); render(); pop(); });

    // 雙擊數字：把目前數字×2
    countEl.addEventListener('dblclick', () => { n *= 2; persist(); render(); pop(); });

    // 長按 +1：按住 0.1 秒後開始連加
    let pressTimer;
    plusBtn.addEventListener('mousedown', () => {
      pressTimer = setTimeout(function loop() {
        update(1);
        pressTimer = setTimeout(loop, 100);
      }, 400);
    });
    ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev =>
      plusBtn.addEventListener(ev, () => clearTimeout(pressTimer))
    );

    // 主題切換
    toggleThemeBtn.addEventListener('click', () => {
      document.body.classList.toggle('light');
      isLight = document.body.classList.contains('light');
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
      pop();
    });

    // 小工具函式們
    function update(delta){ n += delta; persist(); render(); pop(); }
    function render(){ countEl.textContent = n; }
    function persist(){ localStorage.setItem('count', n); }

    // 視覺小特效：數字輕微彈跳＋外圈波紋
    function pop(){
      countEl.animate([{transform:'scale(1.0)'},{transform:'scale(1.1)'},{transform:'scale(1)'}], {duration:200, easing:'ease-out'});
      ripple();
    }
    function ripple(){
      const r = document.createElement('span');
      Object.assign(r.style, {
        position:'absolute', inset:'0', borderRadius:'16px',
        boxShadow:'0 0 0 0 var(--accent)',
        pointerEvents:'none', filter:'blur(0.5px)'
      });
      card.appendChild(r);
      r.animate([
        { boxShadow:'0 0 0 0 var(--accent)' , opacity: .6 },
        { boxShadow:'0 0 0 18px transparent', opacity: 0 }
      ], { duration: 400, easing:'ease-out' }).onfinish = () => r.remove();
    }
  </script>
</body>
</html>
